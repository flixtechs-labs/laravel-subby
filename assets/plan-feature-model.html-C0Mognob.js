import{_ as n,c as s,o as a,b as e}from"./app-Vnr7Qnzh.js";const t={},p=e(`<h1 id="plan-feature-model" tabindex="-1"><a class="header-anchor" href="#plan-feature-model"><span>Plan Feature Model</span></a></h1><p>This model relates to which features has a Plan. This features will be attached to every new subscription.</p><h2 id="create-plan-features" tabindex="-1"><a class="header-anchor" href="#create-plan-features"><span>Create plan features</span></a></h2><p>Features are things that your plan allows subscribers to do. The obligatory fields are: <code>tag</code>, <code>name</code>, and <code>value</code>. The value of the feature tells if or how many times the subscriber is allowed to use it. When setting a feature that should be active or not, use written strings &#39;true&#39; or &#39;false&#39;, otherwise use an integer to tell how many times it can be used. If in the higher plan you want to give unlimited access to the &quot;counted&quot; feature, use &#39;true&#39; as well. If you want the usage of features to be reset on a regular basis, provide optional <code>resettable_period</code> and <code>resettable_interval</code> fields.</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Flixtechs<span class="token punctuation">\\</span>Subby<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Plan</span><span class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> <span class="token class-name static-context">Plan</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create multiple plan features at once</span>
<span class="token variable">$plan</span><span class="token operator">-&gt;</span><span class="token function">features</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">saveMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;tag&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;social_profiles&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Social profiles available&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;value&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;sort_order&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;tag&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;posts_per_social_profile&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Scheduled posts per profile&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;value&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;sort_order&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;resettable_period&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;resettable_interval&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;month&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;tag&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;analytics&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;name&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;Analytics&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;value&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">true</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;sort_order&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="get-plan-feature-value" tabindex="-1"><a class="header-anchor" href="#get-plan-feature-value"><span>Get Plan Feature value</span></a></h2><p>Say you want to show the value of the feature <em>posts_per_social_profile</em> from above. You can do so in many ways:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Flixtechs<span class="token punctuation">\\</span>Subby<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Plan</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flixtechs<span class="token punctuation">\\</span>Subby<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>PlanFeature</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Flixtechs<span class="token punctuation">\\</span>Subby<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>PlanSubscription</span><span class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> <span class="token class-name static-context">Plan</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use the plan instance to get feature&#39;s value</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token variable">$plan</span><span class="token operator">-&gt;</span><span class="token function">getFeatureByTag</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts_per_social_profile&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">value</span><span class="token punctuation">;</span>

<span class="token comment">// Query the feature itself directly</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanFeature</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;tag&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;posts_per_social_profile&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">value</span><span class="token punctuation">;</span>

<span class="token comment">// Get feature value through the subscription instance</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanSubscription</span><span class="token operator">::</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getFeatureValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts_per_social_profile&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="feature-options" tabindex="-1"><a class="header-anchor" href="#feature-options"><span>Feature Options</span></a></h2><p>Plan features are great for fine-tuning subscriptions, you can top up certain feature for X times of usage, so users may then use it only for that amount. Features also have the ability to be resettable and then it&#39;s usage could be expired too. See the following examples:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Flixtechs<span class="token punctuation">\\</span>Subby<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>PlanFeature</span><span class="token punctuation">;</span>

<span class="token comment">// Find plan feature</span>
<span class="token variable">$feature</span> <span class="token operator">=</span> <span class="token class-name static-context">PlanFeature</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;tag&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;posts_per_social_profile&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get feature reset date</span>
<span class="token variable">$feature</span><span class="token operator">-&gt;</span><span class="token function">getResetDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>Carbon<span class="token punctuation">\\</span>Carbon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),o=[p];function l(c,i){return a(),s("div",null,o)}const r=n(t,[["render",l],["__file","plan-feature-model.html.vue"]]),k=JSON.parse('{"path":"/v4.x/models/plan-feature-model.html","title":"Plan Feature Model","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Create plan features","slug":"create-plan-features","link":"#create-plan-features","children":[]},{"level":2,"title":"Get Plan Feature value","slug":"get-plan-feature-value","link":"#get-plan-feature-value","children":[]},{"level":2,"title":"Feature Options","slug":"feature-options","link":"#feature-options","children":[]}],"git":{"updatedTime":1716242914000,"contributors":[{"name":"Borja Puig","email":"bdpuig@gmail.com","commits":1},{"name":"Given Ncube","email":"givenyslim12@gmail.com","commits":1},{"name":"bpuig","email":"bdpuig@gmail.com","commits":1}]},"filePathRelative":"v4.x/models/plan-feature-model.md"}');export{r as comp,k as data};
